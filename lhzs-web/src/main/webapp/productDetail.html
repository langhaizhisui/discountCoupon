<html>
<head>
    <meta charset="utf-8">
    <title id="metaTitle">优惠券</title>
    <meta id="metaKeywords" name="Keywords" content="领券购物，领券网，内部优惠，省钱购物，正品网购">
    <meta id="metaDescription" name="Description" content="哔唛网领券购物专区，专注全网商家内部优惠券活动,每日送出大量商家内部优惠券，特价团购福利，提供当季全网最具性价比的包邮产品,精选万人团商品超值好货,超低价好货享疯狂特价促销,让你全面安心享受网上购物乐趣!（固定）
        液晶电视/智能电视产品推荐，买购网旗下名品大牌。精选液晶电视/智能电视行业十大品牌产品，液晶电视/智能电视产品报价，液晶电视/智能电视当季产品，液晶电视/智能电视新品推荐，液晶电视/智能电视产品图片等。
        领券购物专注全网商家内部优惠券活动,每日送出大量商家内部优惠券，精选万人团商品超值好货,超低价享疯狂特价促销,让你全面安心享受网上购物乐趣!
        裙子吧 - 领券购物_先领取优惠券再下单购物_真心省!-领券网-领券网
        买购网行业品牌网店频道，提供具有高信誉度的行业网店大全，包括数码网店，手机网店，女装网店，服装网店，家纺网店，食品网店，化妆品网店，电器网店，母婴网店等，为您了解和购买产品提供全面信息帮助。最新最权威的品牌网店尽在买购网！
        网商天地网是一家收录品牌旗舰店的网站，让用户能方便快捷的找到自己喜爱的旗舰店。">

    <style>
        .ad{
            width: 1200px;
            margin: 0 auto;
        }
        .new-shop, .adv {
            float: left;
            font-size: 15px;
            text-align: center;
            padding: 10px 0px;
        }

        .new-shop {
            width: 200px;
            background-color: #ffdddb;
            height: 280px;
        }

        .flash-img {
            float: left;
            font-size: 15px;
            text-align: center;
            width: 53%;
        }

        .adv {
            width: 300px;
            background-color: #ffdddb;
            padding:10px 20px;
            height: 280px;
        }

        .adv ul li {
            padding-top: 10px;
        }

        .new-shop ul li {
            padding-top: 10px;
        }

        .hot-brand {
            font-size: 10px;
            width: 1200px;
            margin: 0 auto;
        }

        .hot-brand-title{
            font-size: 18px;
            padding: 20px 0px 0px 0px;
        }

        .hot-brand ul li {
            float: left;
            padding: 10px 20px;
            color: #ff5e54;
        }

        .moldbaby {
            font-size: 10px;
        }

        .moldbaby-more {
            text-decoration: underline;
            color: #ff5e54;
            padding: 30px 10% 0px 0px;
            text-align: right;
            font-size: 16px;
        }

        .moldbaby-subject {
            float: left;
            margin-right: 48px;
            border: 1px solid #ddd;
            width: 250px;
            cursor: pointer;
            margin-top: 20px;
        }

        .moldbaby-subject img {
            width: 100%;
        }

        .moldbaby-subject-img {
            text-align: center;
        }

        .moldbaby-subject-title {
            font-size: 15px;
            text-align: center;
            padding: 15px 10px;
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .curr-price, .other-price {
            float: left;
            font-size: 15px;
        }

        .curr-price {
            height: 30px;
            line-height: 30px;
            padding: 0px 15% 0px 10px;
            color: red;
        }

        .go-shop {
            height: 35px;
            line-height: 35px;
            padding: 0px 10px;
            border: 1px solid #ff5e54;
            color: white;
            text-align: center;
            margin: 10px 0px 0px;
            background-color: #ff5e54;
            font-size: 15px;
        }

        .shop {
            width: 250px;
            border: 1px dotted #ddd;
            margin-right: 48px;
            margin-top: 20px;
            border-radius: 5px;
            float: left;
            cursor: pointer;
        }

        .shop-logo {
            margin: 10px 10px;
        }

        .shop-logo img {
            float: left;
            margin-bottom: 10px;
            width: 55%;
        }

        .shop-desc {
            padding-top: 9px;
            padding-left: 58%;
        }

        .shop-name {
            font-size: 10px;
            font-weight: bold;
        }

        .shop-type {
            margin-top: 10px;
            font-size: 14px;
        }

        .shop-addr {
            margin-top: 5px;
        }

        .back-to-top {
            position: fixed;
            bottom: 100px;
            right: 100px;
            background: #ff5e54;
            color: white;
            font-size: 17px;
            display: none;
            padding: 23px 18px;
            border-radius: 100%;
        }
        .hot-prod{
            width: 1200px;
            margin: 0 auto;
        }

        .prod {
            min-width: 1300px;
        }

        .prod-detail {
            margin: 20px 7%;
            float: left;
        }

        .prod-detail-img {
            width: 350px;
            float: left;
        }

        .prod-desc {
            float: left;
            margin-left: 20px;
            font-size: 15px;
            width: 400px;
        }

        .prod-desc-title {
            padding-top: 60px;
        }

        .prod-desc-price {
            margin-top: 60px;
            background-color: #eee;
            padding: 20px;
        }

        .prod-desc-discount {
            margin-top: 60px;
            cursor: pointer;
        }

        .prod-desc-discount-coupon {
            float: left;
            background-color: #ff5e54;
            padding: 10px;
            border-right: 2px dotted #333;
        }

        .prod-desc-discount-go {
            float: left;
            padding: 18px 20px 17px 20px;
            background-color: #eee;
        }

        .prod-generalize {
            float: left;
            width: 300px;
            font-size: 15px;
        }

        .prod-generalize-text {
            text-align: center;
            margin-bottom: 20px;
            margin-top: 20px;
            font-size: 16px;
        }

        .prod-generalize-item {
            text-align: center;
            cursor: pointer;
        }

        .prod-generalize-item-img img {
            width: 143px;
        }

        .prod-generalize-item-price {
            position: relative;
            top: -35px;
            background: white;
            padding: 10px 0px;
            opacity: 0.8;
        }

        .boutique {
            font-size: 18px;
        }

        .back-to-top {
            position: fixed;
            bottom: 100px;
            right: 100px;
            background: #ff5e54;
            color: white;
            font-size: 17px;
            display: none;
            padding: 23px 18px;
            border-radius: 100%;
        }
    </style>
    <link rel="stylesheet" href="/css/base.css">
</head>
<body>
<div class="header"></div>
<section>
    <div class="prod clearfix">
        <div class="prod-detail"></div>

        <div class="prod-generalize">
            <div class="prod-generalize-text">- 大家都在抢 -</div>
            <div class="prod-generalize-list"></div>
        </div>
    </div>
    <div class="hot-prod">
        <div class="boutique">热门商品精选</div>
        <div class=" moldbaby clearfix"></div>
    </div>

    <!-- 返回顶部 -->
    <div class="back-to-top">top</div>
</section>
<footer class="footer"></footer>
</body>
<script src="js/jquery.min.js"></script>
<script src="js/app.js"></script>
<script>
    var prodId = getParameter("prodId");

    $(function () {
        init();
    });
    function init() {
        $(".header").load("header.html");
        $(".footer").load("footer.html");
        getProductDetail();
        getGeneralizeProduct();
        getProduct();
    }
    function getProductDetail() {
        var param = {"prodId": prodId};
        app.getProductDetail(param, function (result) {
            if (result.code == 200) {
                var data = result.data;

                var html = '<img src="' + data.banner + '" class="prod-detail-img">' +
                    '<div class="prod-desc">' +
                    '<div class="prod-desc-title">' + data.name + '</div>' +
                    '<div class="prod-desc-price">' +
                    '<span class="prod-desc-price-dx">(独享)</span>' +
                    '<span>券后价 </span>' +
                    '<span class="prod-desc-price-now">¥' + data.discountPrice + '</span>' +
                    '<span> 在售价</span>' +
                    '<span class="prod-desc-price-old">¥' + data.price + '</span>' +
                    '</div>' +
                    '<div class="prod-desc-discount">' +
                    '<div class="prod-desc-discount-coupon">' +
                    '<div>优惠券</div>' +
                    '<div>¥' + (data.price - data.discountPrice).toFixed(2) + '</div>' +
                    '</div>' +
                    '<div class="prod-desc-discount-go">领券购买</div>' +
                    '</div>' +
                    '</div>';
            }
            $(".prod-detail").html(html);
            $("#metaTitle").text(data.name);
            $(".prod-desc-discount-go").click(function () {
                window.open(data.prodGeneralize);
            })
        });
    }
    function getGeneralizeProduct() {
        var reqData = {};
        var param = {};
        param.page = 1;
        param.pageSize = 2;
        reqData.reqData = param;
        app.getGeneralizeProduct(reqData, function (result) {
            if (result.code == 200) {
                var html = '';
                var data = result.data.prodList;
                for (var i = 0; i < data.length; i++) {
                    var product = data[i];
                    html += '<div class="prod-generalize-item" index="' + i + '">' +
                        '<div class="prod-generalize-item-img">' +
                        '<img src="' + product.banner + '">' +
                        '</div>' +
                        '<div class="prod-generalize-item-price">券后¥' + (product.price - product.discountPrice).toFixed(2) + '</div>' +
                        '</div>'
                }
                $(".prod-generalize-list").html(html);

                $(".prod-generalize-item").click(function () {
                    var index = $(this).attr("index");
                    location.href = "productDetail.html?prodId=" + data[index].prodId;
                });
            }
        });
    }
    function getProduct() {
        var reqData = {};
        var param = {};
        param.page = 1;
        param.pageSize = 20;
        reqData.reqData = param;

        app.getProductList(reqData, function (result) {
            if (result.code == 200) {
                var html = '';
                var data = result.data.prodList;
                for (var i = 0; i < data.length; i++) {
                    var product = data[i];
                    html += '<div class="moldbaby-subject" index="' + i + '">' +
                        '<div class="moldbaby-subject-img">' +
                        '<img src="' + product.banner + '">' +
                        '</div>' +
                        '<div class="moldbaby-subject-title">' + getProductName(product.name) + '</div>' +
                        '<div class="clearfix">' +
                        '<div class="curr-price">现价:¥' + product.discountPrice.toFixed(2) + '</div>' +
                        '<div class="other-price">' +
                        '<div style="margin-bottom:5px">原价:¥' + product.price.toFixed(2) + '</div>' +
                        '<div>立省:¥' + (product.price - product.discountPrice).toFixed(2) + '</div>' +
                        '</div>' +
                        '</div>' +
                        '<div class="go-shop">去购物</div>' +
                        '</div>';
                }
                $(".moldbaby").html(html);

                $(".moldbaby-subject").click(function () {
                    var index = $(this).attr("index");
                    location.href = "productDetail.html?prodId=" + data[index].prodId;
                });
            }
        });
    }
    function getProductName(productName) {
        if (productName.length > 30) {
            productName = productName.substr(0, 28) + "...";
        }
        return productName;
    }
</script>
</html>